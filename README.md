# AIå›¾ç‰‡ç”ŸæˆMCP Server

ä¸€ä¸ªåŸºäºModel Context Protocol (MCP)çš„AIå›¾ç‰‡ç”ŸæˆæœåŠ¡å™¨ï¼Œä¸“é—¨ç”¨äºè‡ªåŠ¨åˆ†æç½‘é¡µå’Œæ–‡ç« å†…å®¹ï¼Œç”Ÿæˆç›¸åº”çš„AIå›¾ç‰‡ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
1. **æ™ºèƒ½ç½‘é¡µåˆ†æ**: è‡ªåŠ¨åˆ†æHTMLå†…å®¹ï¼Œè¯†åˆ«éœ€è¦å›¾ç‰‡çš„åŒºåŸŸ
2. **æ–‡ç« é…å›¾ç”Ÿæˆ**: åˆ†ææ–‡ç« å†…å®¹ï¼Œä¸ºå…³é”®æ®µè½ç”Ÿæˆé…å›¾
3. **AIå›¾ç‰‡ç”Ÿæˆ**: ä½¿ç”¨FLUXæ¨¡å‹ç”Ÿæˆé«˜è´¨é‡å›¾ç‰‡
4. **è‹±æ–‡æç¤ºè¯ä¼˜åŒ–**: è‡ªåŠ¨å°†ä¸­æ–‡æè¿°è½¬æ¢ä¸ºé€‚åˆAIç”Ÿæˆçš„è‹±æ–‡æç¤ºè¯
5. **HTMLå¢å¼º**: å°†ç”Ÿæˆçš„å›¾ç‰‡è‡ªåŠ¨åµŒå…¥åˆ°åŸå§‹ç½‘é¡µä¸­

### ğŸ› ï¸ æä¾›çš„å·¥å…·

#### 1. analyze-and-generate-webpage-images
- **åŠŸèƒ½**: åˆ†æç½‘é¡µHTMLå†…å®¹å¹¶ç”Ÿæˆç›¸åº”å›¾ç‰‡
- **å‚æ•°**:
  - `html`: ç½‘é¡µHTMLå†…å®¹
  - `generateImages`: æ˜¯å¦ç«‹å³ç”Ÿæˆå›¾ç‰‡ï¼ˆé»˜è®¤trueï¼‰

#### 2. analyze-and-generate-article-images
- **åŠŸèƒ½**: åˆ†ææ–‡ç« å†…å®¹å¹¶ç”Ÿæˆé…å›¾
- **å‚æ•°**:
  - `content`: æ–‡ç« å†…å®¹
  - `title`: æ–‡ç« æ ‡é¢˜ï¼ˆå¯é€‰ï¼‰
  - `generateImages`: æ˜¯å¦ç«‹å³ç”Ÿæˆå›¾ç‰‡ï¼ˆé»˜è®¤trueï¼‰

#### 3. generate-single-image
- **åŠŸèƒ½**: æ ¹æ®æç¤ºè¯ç”Ÿæˆå•å¼ å›¾ç‰‡
- **å‚æ•°**:
  - `prompt`: è‹±æ–‡æç¤ºè¯
  - `width`: å›¾ç‰‡å®½åº¦ï¼ˆé»˜è®¤1024ï¼‰
  - `height`: å›¾ç‰‡é«˜åº¦ï¼ˆé»˜è®¤1024ï¼‰
  - `model`: ä½¿ç”¨çš„æ¨¡å‹åç§°ï¼ˆå¯é€‰ï¼‰

#### 4. generate-enhanced-webpage
- **åŠŸèƒ½**: å°†ç”Ÿæˆçš„å›¾ç‰‡åµŒå…¥åˆ°åŸå§‹HTMLä¸­
- **å‚æ•°**:
  - `originalHtml`: åŸå§‹HTMLå†…å®¹
  - `imageMapping`: å›¾ç‰‡IDåˆ°URLçš„æ˜ å°„

#### 5. translate-prompt-to-english
- **åŠŸèƒ½**: å°†ä¸­æ–‡æè¿°ç¿»è¯‘ä¸ºè‹±æ–‡æç¤ºè¯
- **å‚æ•°**:
  - `chinesePrompt`: ä¸­æ–‡æç¤ºè¯æˆ–æè¿°
  - `style`: å›¾ç‰‡é£æ ¼ï¼ˆå¯é€‰ï¼‰

### ğŸ“Š æä¾›çš„èµ„æº

#### 1. generated-images
- **URI**: `generated://images`
- **åŠŸèƒ½**: è·å–æ‰€æœ‰å·²ç”Ÿæˆçš„AIå›¾ç‰‡ä¿¡æ¯

#### 2. generation-stats
- **URI**: `stats://generation`
- **åŠŸèƒ½**: è·å–å›¾ç‰‡ç”Ÿæˆçš„ç»Ÿè®¡ä¿¡æ¯

## å®‰è£…å’Œä½¿ç”¨

### 1. å®‰è£…ä¾èµ–
```bash
npm install
```

### 2. ç¼–è¯‘TypeScript
```bash
npm run build
```

### 3. è¿è¡ŒæœåŠ¡å™¨
```bash
npm start
```

### 4. å¼€å‘æ¨¡å¼
```bash
npm run dev
```

## é…ç½®MCPå®¢æˆ·ç«¯

### Claude Desktopé…ç½®
åœ¨Claude Desktopçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š

```json
{
  "mcpServers": {
    "ai-image-generator": {
      "command": "node",
      "args": ["/path/to/your/ai-image-generator-mcp-server/dist/index.js"],
      "env": {
        "MODELSCOPE_API_KEY": "your-modelscope-api-key-here"
      }
    }
  }
}
```

**é‡è¦**: è¯·å°† `"your-modelscope-api-key-here"` æ›¿æ¢ä¸ºæ‚¨çš„çœŸå®ModelScope APIå¯†é’¥ã€‚

### å…¶ä»–MCPå®¢æˆ·ç«¯
æ ¹æ®æ‚¨ä½¿ç”¨çš„MCPå®¢æˆ·ç«¯ï¼ŒæŒ‰ç…§ç›¸åº”çš„é…ç½®æ–¹å¼æ·»åŠ æ­¤æœåŠ¡å™¨ï¼Œå¹¶åœ¨ç¯å¢ƒå˜é‡ä¸­è®¾ç½®APIå¯†é’¥ã€‚

## APIå¯†é’¥é…ç½®

### 1. è·å–ModelScope APIå¯†é’¥
1. è®¿é—® [ModelScope](https://modelscope.cn/)
2. æ³¨å†Œå¹¶ç™»å½•è´¦æˆ·
3. è¿›å…¥ä¸ªäººä¸­å¿ƒ â†’ APIç®¡ç†
4. åˆ›å»ºæ–°çš„APIå¯†é’¥
5. å¤åˆ¶APIå¯†é’¥ï¼ˆæ ¼å¼ï¼š`ms-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`ï¼‰

### 2. é…ç½®ç¯å¢ƒå˜é‡
åœ¨MCPå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶çš„ `env` éƒ¨åˆ†è®¾ç½®APIå¯†é’¥ï¼Œä¸€æ¬¡é…ç½®é•¿æœŸä½¿ç”¨ï¼Œç±»ä¼¼äºGoogle Mapsçš„é…ç½®æ–¹å¼ã€‚

## ä½¿ç”¨ç¤ºä¾‹

é…ç½®å®ŒAPIå¯†é’¥åï¼Œå¯ä»¥ç›´æ¥åœ¨MCPå®¢æˆ·ç«¯ä¸­ä½¿ç”¨å·¥å…·ï¼Œæ— éœ€å†ä¼ é€’APIå¯†é’¥ï¼š

### 1. åˆ†æç½‘é¡µå¹¶ç”Ÿæˆå›¾ç‰‡
```typescript
// é€šè¿‡MCPå®¢æˆ·ç«¯è°ƒç”¨
const result = await mcpClient.callTool("analyze-and-generate-webpage-images", {
  html: "<html><body><h1>æˆ‘çš„ç½‘ç«™</h1><img src='placeholder.jpg' alt='ä¸»é¡µå›¾ç‰‡'></body></html>",
  generateImages: true
});
```

### 2. ä¸ºæ–‡ç« ç”Ÿæˆé…å›¾
```typescript
const result = await mcpClient.callTool("analyze-and-generate-article-images", {
  content: "äººå·¥æ™ºèƒ½æŠ€æœ¯æ­£åœ¨å¿«é€Ÿå‘å±•...",
  title: "AIæŠ€æœ¯å‘å±•è¶‹åŠ¿"
});
```

### 3. ç”Ÿæˆå•å¼ å›¾ç‰‡
```typescript
const result = await mcpClient.callTool("generate-single-image", {
  prompt: "A beautiful landscape with mountains and lake, photorealistic, high quality",
  width: 1024,
  height: 768
});
```

## æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒç»„ä»¶
- **ImageGenerator**: è´Ÿè´£ä¸ModelScope APIäº¤äº’ï¼Œç”ŸæˆAIå›¾ç‰‡
- **ContentAnalyzer**: åˆ†æç½‘é¡µå’Œæ–‡ç« å†…å®¹ï¼Œè¯†åˆ«å›¾ç‰‡éœ€æ±‚
- **AIImageGeneratorMCPServer**: ä¸»æœåŠ¡å™¨ç±»ï¼Œå¤„ç†MCPåè®®é€šä¿¡

### æ”¯æŒçš„å›¾ç‰‡æ ¼å¼
- å®½åº¦: 200-1200åƒç´ 
- é«˜åº¦: 200-1200åƒç´ 
- æ ¼å¼: JPEG, PNG

### ä½¿ç”¨çš„AIæ¨¡å‹
- é»˜è®¤æ¨¡å‹: `MusePublic/489_ckpt_FLUX_1`
- æ”¯æŒè‡ªå®šä¹‰æ¨¡å‹ï¼ˆéœ€è¦åœ¨ModelScopeå¹³å°å¯ç”¨ï¼‰

## é«˜çº§åŠŸèƒ½

### æ™ºèƒ½å†…å®¹åˆ†æ
- è‡ªåŠ¨è¯†åˆ«ç½‘é¡µä¸­çš„å›¾ç‰‡å ä½ç¬¦
- åŸºäºä¸Šä¸‹æ–‡ç”Ÿæˆç›¸å…³çš„å›¾ç‰‡æè¿°
- æ™ºèƒ½æ¨æ–­å›¾ç‰‡å°ºå¯¸å’Œé£æ ¼

### æç¤ºè¯ä¼˜åŒ–
- è‡ªåŠ¨å°†ä¸­æ–‡æè¿°è½¬æ¢ä¸ºè‹±æ–‡
- æ·»åŠ è´¨é‡å’Œé£æ ¼æè¿°ç¬¦
- åŸºäºå†…å®¹ä¸Šä¸‹æ–‡ä¼˜åŒ–æç¤ºè¯

### æ‰¹é‡å¤„ç†
- æ”¯æŒåŒæ—¶ç”Ÿæˆå¤šå¼ å›¾ç‰‡
- å¼‚æ­¥å¤„ç†æé«˜æ•ˆç‡
- é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

## é”™è¯¯å¤„ç†

æœåŠ¡å™¨åŒ…å«å®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼š
- APIè°ƒç”¨å¤±è´¥æ—¶çš„é”™è¯¯ä¿¡æ¯
- ç½‘ç»œè¿æ¥é—®é¢˜çš„å¤„ç†
- æ— æ•ˆå‚æ•°çš„éªŒè¯
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—è®°å½•

## æ€§èƒ½ä¼˜åŒ–

- å¼‚æ­¥å›¾ç‰‡ç”Ÿæˆ
- å†…å­˜ä¸­ç¼“å­˜ç”Ÿæˆçš„å›¾ç‰‡ä¿¡æ¯
- æ‰¹é‡å¤„ç†ä¼˜åŒ–
- é”™è¯¯é‡è¯•æœºåˆ¶

## æ‰©å±•æ€§

### æ·»åŠ æ–°çš„å›¾ç‰‡ç”Ÿæˆæ¨¡å‹
åœ¨`ImageGenerator`ç±»ä¸­æ·»åŠ æ–°çš„æ¨¡å‹æ”¯æŒï¼š

```typescript
const newModel = 'your-new-model-id';
const response = await this.generateImage({
  prompt: "your prompt",
  model: newModel
});
```

### æ·»åŠ æ–°çš„åˆ†æç®—æ³•
åœ¨`ContentAnalyzer`ç±»ä¸­æ‰©å±•åˆ†æåŠŸèƒ½ï¼š

```typescript
private customAnalyzer(content: string): AnalysisResult {
  // å®ç°è‡ªå®šä¹‰åˆ†æé€»è¾‘
}
```

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤æ›´æ”¹
4. æ¨é€åˆ°åˆ†æ”¯
5. åˆ›å»ºPull Request

## è®¸å¯è¯

MIT License

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- åˆ›å»ºIssue
- æäº¤Pull Request

## æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒç½‘é¡µå’Œæ–‡ç« åˆ†æ
- é›†æˆFLUXå›¾ç‰‡ç”Ÿæˆæ¨¡å‹
- æä¾›å®Œæ•´çš„MCPåè®®æ”¯æŒ 